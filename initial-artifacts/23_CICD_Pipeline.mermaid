graph LR
    subgraph "Development"
        DEV[Developer]
        GIT[GitLab Repo]
    end

    subgraph "CI Build"
        TRIGGER[Pipeline Trigger]
        BUILD[Build & Compile]
        TEST[Unit Tests]
        SONAR[Code Quality<br/>SonarQube]
        SEC_SCAN[Security Scan<br/>OWASP]
        IMAGE[Docker Build]
    end

    subgraph "CD Deploy"
        TEST_ENV[Deploy Test]
        INT_TEST[Integration Tests]
        STAGING[Deploy Staging]
        UAT[UAT Approval]
        PROD[Deploy Production]
    end

    subgraph "Verification"
        HEALTH[Health Checks]
        SMOKE[Smoke Tests]
        ROLLBACK{Rollback?}
    end

    DEV --> GIT
    GIT --> TRIGGER
    TRIGGER --> BUILD
    BUILD --> TEST
    TEST --> SONAR
    SONAR --> SEC_SCAN
    SEC_SCAN --> IMAGE

    IMAGE --> TEST_ENV
    TEST_ENV --> INT_TEST
    INT_TEST --> STAGING
    STAGING --> UAT
    UAT --> PROD

    PROD --> HEALTH
    HEALTH --> SMOKE
    SMOKE --> ROLLBACK

    ROLLBACK -->|Success| COMPLETE[Complete]
    ROLLBACK -->|Failure| REVERT[Revert]

    style GIT fill:#F39C12
    style BUILD fill:#4A90E2
    style SONAR fill:#50C878
    style PROD fill:#27AE60
    style ROLLBACK fill:#E74C3C
