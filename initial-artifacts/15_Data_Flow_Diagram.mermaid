graph LR
    USER[Trader]
    PORTAL[Web Portal]
    API[API Gateway]
    DECL_SVC[Declaration Service]
    ASYCUDA[ASYCUDA]
    PAYMENT_SVC[Payment Service]
    BANK[Bank]
    DB[(Database)]

    USER -->|1.Create| PORTAL
    PORTAL -->|2.Submit JSON| API
    API -->|3.Route| DECL_SVC
    DECL_SVC -->|4.Save| DB
    DECL_SVC -->|5.CUSDEC XML| ASYCUDA
    ASYCUDA -.6.CUSRES.-> DECL_SVC
    DECL_SVC -->|7.Invoice| PAYMENT_SVC
    USER -->|8.Pay| PAYMENT_SVC
    PAYMENT_SVC -->|9.BANSTA| BANK
    BANK -.10.Confirm.-> PAYMENT_SVC
    PAYMENT_SVC -.11.Update.-> DB

    style PORTAL fill:#4A90E2
    style API fill:#50C878
    style ASYCUDA fill:#E74C3C
    style DB fill:#3498DB
